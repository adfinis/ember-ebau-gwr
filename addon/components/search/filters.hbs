<ValidatedForm
  @model={{@changeset}}
  @on-submit={{(perform @onSubmit @changeset)}}
  @validateBeforeSubmit={{true}}
  class="validated-form"
  ...attributes
  as |Form|
>
  {{#let
    (component
      Form.submit
      type="submit"
      label=(t "ember-gwr.components.modelForm.save")
      disabled=(or this.isSaving @disabled this.isSubmitDisabled)
      loading=@onSubmit.isRunning
      buttonComponent=(component "model-form/submit" color="primary")
    )
    (component
      Form.input
      errorComponent=(component "validated-form-error")
      optionLabelPath="label"
      optionValuePath="value"
      optionTargetPath="value"
    )
    as |Submit FilterField|
  }}
    {{yield
      FilterField
      (component
        Form.input
        name="hasError"
        type="select"
        label=(t "ember-gwr.search.hasError")
        optionLabelPath="label"
        optionValuePath="value"
        optionTargetPath="value"
        options=this.errorOptions
        prompt=(t "ember-gwr.search.hasErrorPlaceholder")
        errorComponent=(component "validated-form-error")
      )
      (component
        "uk-button"
        label=(if this.extendedSearch (t "ember-gwr.components.search.extendedSearch.collapse") (t "ember-gwr.components.search.extendedSearch.extend"))
        name=this.extendedSearch
        value=this.extendedSearch
        onClick=(fn (mut this.extendedSearch) (not this.extendedSearch))
      )
      Form
    }}
    {{#if this.extendedSearch}}
      <div class="uk-flex uk-flex-between uk-margin-small-bottom uk-margin-top">
        <div class="uk-width-1-2">
          <h3>
            {{t
              "ember-gwr.components.search.realestateIdentificationHeading"
            }}
          </h3>
          <Form.input
            @name="realestateIdentification.EGRID"
            @label={{t "ember-gwr.building.realestateIdentification.EGRID"}}
          />
          <Form.input
            @name="realestateIdentification.subDistrict"
            @label={{t "ember-gwr.building.realestateIdentification.subDistrict"}}
            type="number"
          />
        </div>

        <div>
          <hr
            class="uk-divider-vertical uk-height-1-1 uk-margin-left uk-margin-right"
          />
        </div>

        <div class="uk-width-1-2">
          <div class="uk-margin">
            <h3>
              {{t "ember-gwr.components.search.createDateHeading"}}
            </h3>
            <div class="uk-flex">
              <div class="uk-width-1-2">
                <div class="uk-margin-small-right">
                  <Form.input
                    @name="createDate.dateFrom"
                    @label={{t "ember-gwr.components.search.createDate.dateFrom"}}
                    @type="date"
                    @errorComponent={{component "validated-form-error"}}
                  />
                </div>
              </div>
              <div class="uk-width-1-2">
                <div class="uk-margin-small-right">
                  <Form.input
                    @name="createDate.dateTo"
                    @label={{t "ember-gwr.components.search.createDate.dateTo"}}
                    @type="date"
                    @errorComponent={{component "validated-form-error"}}
                  />
                </div>
              </div>
            </div>
          </div>

          <div class="uk-margin">
            <h3>
              {{t "ember-gwr.components.search.modifyDateHeading"}}
            </h3>
            <div class="uk-flex">
              <div class="uk-width-1-2">
                <div class="uk-margin-small-right">
                  <Form.input
                    @name="modifyDate.dateFrom"
                    @label={{t "ember-gwr.components.search.modifyDate.dateFrom"}}
                    @type="date"
                    @errorComponent={{component "validated-form-error"}}
                  />
                </div>
              </div>
              <div class="uk-width-1-2">
                <div class="uk-margin-small-right">
                  <Form.input
                    @name="modifyDate.dateTo"
                    @label={{t "ember-gwr.components.search.modifyDate.dateTo"}}
                    @type="date"
                    @errorComponent={{component "validated-form-error"}}
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    {{/if}}
    
    <div class="uk-flex-inline uk-flex-nowrap uk-flex-top uk-margin-top uk-width-1-1 uk-margin-bottom">
      <Submit data-test-submit-btn/>
      {{#if this.isSubmitDisabled}}
        <div uk-alert class="uk-width-1-1 uk-alert-warning uk-margin-left uk-margin-remove-top uk-margin-small-bottom uk-padding-small uk-flex-inline uk-flex-middle">
          <span>
            {{t "ember-gwr.search.minFilterError"}}
          </span>
        </div>  
      {{/if}}
    </div>
  {{/let}}
</ValidatedForm>
